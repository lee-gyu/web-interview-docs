# React 18

> 개발자들이 쉽게 훌륭한 사용자 경험을 구축할 수 있도록 맞추어져 있다.

## React Concurrent Mode

React 18에서 가장 중요한 추가 사항으로 Concurrent Mode가 있다. Concurrent Mode는 React가 더 빠르게 렌더링되도록 하고, 사용자가 더 빠르게 반응하는 앱을 만들 수 있도록 한다.

Concurrency는 리액트에서 동시에 UI에서 다양한 버전을 준비하는데 사용되는 메커니즘이다. 리액트는 우선순위 큐나 다중 버퍼링 같은 내부적인 구현 기술로 정교하게 동작한다. 

리액트 엔진 개발자들은 이러한 세부적인 구현을 앱 개발자들에게 숨기도록 노력했다. 한 리액트 개발자로서 사용자 경험에 집중하고, 리액트는 그 경험을 전달하는 방법만 제어한다. 그래서 리액트 개발자들은 Concurrency의 세부적인 구현에 크게 집중하지 않아도 된다.

Concurrent React에서 중요한 부분은, 바로 렌더링이 중단될 수 있는 것이다. Concurrent 기능을 사용하기 전에는, 리액트는 이전과 동일한 방법으로 렌더링을 수행한다. 이는 중단 없는 동기식으로 렌더링이 수행되기 때문에, 렌더링을 시작하면 사용자가 렌더링이 완료될 때까지 화면의 결과를 볼 수 없다는 것을 의미한다. 이는 사용자가 앱이 느리다고 느끼게 만든다.

Concurrent Render에서는 항상 이런 동기식 변경이 일어나지 않는다. 리액트는 

## Server Components

> 서버 컴포넌트는 아직 개발단계

서버 컴포넌트는 새로 개발 중인 기능으로 개발자들이 서버와 클라이언트에 걸친 애플리케이션을 구축하도록 한다. 이를 통해 전통적인 서버 렌더링의 성능을 향상하고, 클라이언트 사이드의 앱의 풍부한 상호작용을 더욱 향상시킨다. 서버 컴포넌트는 Concurrent React와는 별개로 개발되었지만, concurrent기능과 스트리밍 서버 렌더링 같은 Suspense 기능과 잘 동작하도록 설계 되었다.

## React 18의 새로운 기능들

### Automatic Batching

Batching은 리액트에서 다중 상태 변경이 생길 때, 더 나은 성능을 위한 것이다. Automatic Batching이 기능이 없었을 때, 오직 리액트 이벤트 핸들러 내에서만 업데이트를 일괄(Batch) 처리했다. 이제는 Promise나 setTimeout, 또는 네이티브 이벤트 핸들러나 기타 리액트가 기본적으로 일괄처리 하지 않는 영역도 자동으로 일괄처리하도록 개선 되었다.

```js
// 이전 버전의 리액트
setTimeout(() => {
  setCount(c => c + 1);
  setFlag(f => !f);
  // 리액트는 2번의 렌더를 수행한다.
}, 1000);

// React18
setTimeout(() => {
  setCount(c => c + 1);
  setFlag(f => !f);
  // 리액트는 한번의 렌더로 일괄 처리한다.
}, 1000);
```

### Transitions



## links 

- <https://react.dev/blog/2022/03/29/react-v18>
